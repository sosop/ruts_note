# rustç¬”è®°

[å·¥å…·](#å·¥å…·)

[åŸºç¡€](#åŸºç¡€)

[åŸºæœ¬æ¦‚å¿µ](#åŸºæœ¬æ¦‚å¿µ)

## å·¥å…·

### cargo: ç¼–è¯‘å·¥å…·åŠåŒ…ç®¡ç†å·¥å…·

- cargo build: ç¼–è¯‘é¡¹ç›®
- cargo run: è¿è¡Œé¡¹ç›®
- cargo test: æµ‹è¯•é¡¹ç›®
- cargo doc: ç»™é¡¹ç›®ç”Ÿæˆæ–‡æ¡£
- cargo publish: å°†libå‘å¸ƒåˆ°crates.io
- cargo new: åˆ›å»ºæ–°é¡¹ç›® 



### å®‰è£…æ ¼å¼åŒ–å·¥å…·rustfmtä»¥åŠé“¾æ¥å·¥å…·clippy

```shell
rustup component add rustfmt
rustup component add clippy

# rustupæ“ä½œ
rustup update
rustup self uninstall
```



### å…¥é—¨å®ä¾‹

```shell
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir test1
# è¿›å…¥ç›®å½•æ–°å»ºmain.rsä»£ç æºæ–‡ä»¶
touch main.rs
# ç¼–å†™ä»£ç è¿›è¡Œç¼–è¯‘
rustc ./main.rs
```

```rust
fn main() {
    println!("this is a rust program!")
}
```

```shell
# cargoåˆ›å»ºé¡¹ç›®
cargo new cargo_test_20190209
cargo build/cargo check
cargo build --release
```

## åŸºç¡€

ä½¿ç”¨æ ‡å‡†åº“ï¼ˆstandard libraryï¼‰

```rust
use std::io;
```

å®ï¼š!

å®šä¹‰å˜é‡

```rust
// rustä¸­å˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„
let a = 10
let mut b = 10 // å¯å˜å˜é‡

// å…³è”å‡½æ•°ï¼ˆé™æ€æ–¹æ³•ï¼‰
String::new()

// å¼‚å¸¸æ•è· io::Result => OK or Err
.expect()

// æ‰“å°å®å ä½ç¬¦
println!("placeholder: {}", v);
```



## åŸºæœ¬æ¦‚å¿µ

### å…³é”®å­—

[å…·ä½“äº†è§£](https://doc.rust-lang.org/book/appendix-01-keywords.html)



### å‘½åè§„èŒƒ

ä¸¤ç§æ–¹å¼ï¼š

- ç¬¬ä¸€ä¸ªå­—ç¬¦å°å†™ï¼Œå‰©ä¸‹å­—ç¬¦æœ‰æ•°å­—ã€å­—æ¯æˆ–_ç»„æˆ
- ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯_ï¼Œä½†æ˜¯å¿…é¡»å¤§äºä¸€ä¸ªå­—ç¬¦ï¼Œå•ç‹¬\_ä¸èƒ½ä½œä¸ºåå­—ï¼Œå‰©ä¸‹çš„å¯ä»¥ç”¨å­—æ¯ã€æ•°å­—æˆ–\_ç»„æˆ



### åŸæ ‡è¯†

æœ‰äº›åœºæ™¯ä¸‹éœ€è¦ç”¨åˆ°å…³é”®å­—æˆ–ä¿ç•™å­—ï¼Œå°±å¯ä»¥ä½¿ç”¨åŸæ ‡è¯†

```rust
let r#fn = "raw id"
r#match()
```



### å˜é‡ä¸å¯å˜æ€§

**rustä¸­å˜é‡é»˜è®¤ä¸å¯å˜ï¼Œè¿™æ ·æä¾›äº†æ›´é«˜çš„å®‰å…¨æ€§ä»¥åŠæ›´ç®€å•çš„å¹¶å‘æ“ä½œ**

```rust
// ç»™å˜é‡ç»‘å®šä¸€ä¸ªå€¼
let a = 10
// æ›´æ”¹å˜é‡açš„å€¼
a = 8   // å°†å¾—åˆ°ä¸€ä¸‹é”™è¯¯ï¼šcannot assign twice to immutable variable

// å£°æ˜å¯å˜å˜é‡
let mut x = 1
x = 6
```

#### å˜é‡ä¸å¸¸é‡çš„ä¸åŒ

- å¸¸é‡ä¸å¯ç”¨mutå…³é”®å­—
- å¸¸é‡ç”¨constå…³é”®å­—å®šä¹‰ï¼Œè€Œä¸”å¿…é¡»å…ˆå£°æ˜å¸¸é‡ç±»å‹
- å¸¸é‡å¯ä»¥åœ¨ä»»ä½•ä½œç”¨åŸŸè¢«å®šä¹‰
- å¸¸é‡ä¸€èˆ¬éƒ½æ˜¯åœ¨å¸¸é‡è¡¨è¾¾å¼ä¸­è¢«è®¾ç½®ï¼Œä¸ä¼šæ˜¯è¿è¡Œæ—¶èµ‹è®¡ç®—æˆ–æŸä¸ªæ–¹æ³•çš„è¿”å›å€¼èµ‹äºˆ

#### å˜é‡å½±shadowing

åŒä¸€å˜é‡åè¢«å¤šæ¬¡å£°æ˜ï¼Œä¸Šä¸€æ¬¡çš„å˜é‡åè¢«å½±åŒ–ï¼Œå€¼ä»¥æœ€åä¸€æ¬¡ä¸ºå‡†

```rust
let x = 5;

let x = x + 1;

let x = x * 2;

// xçš„å€¼ä¸º12
```

ä¸mutçš„ä¸åŒï¼š

- å¿…é¡»ä½¿ç”¨letï¼Œä¸ç„¶ä¼šæœ‰ç¼–è¯‘é”™è¯¯ï¼Œå¯ä»¥æ”¹å˜å€¼ä½†å®Œæˆåä»ç„¶æ˜¯å€¼ä¸å¯å˜å˜é‡
- letä¼šåˆ›å»ºä¸€ä¸ªæ–°å˜é‡ï¼Œè¿™æ ·å¯ä»¥æ”¹å˜å˜é‡çš„æ•°æ®ç±»å‹ä½†ä»ç„¶ä½¿ç”¨ç›¸åŒçš„å˜é‡å



### æ•°æ®ç±»å‹

**æ•°æ®ç±»å‹çš„å­é›†ï¼šçº¯é‡å’Œå¤åˆç±»å‹ï¼›rustæ˜¯ä¸€é—¨é™æ€è¯­è¨€ï¼Œæ‰€ä»¥ç¼–è¯‘çš„æ—¶å€™å¿…é¡»çŸ¥é“æ‰€æœ‰å˜é‡ç±»å‹ï¼›**

#### çº¯é‡ç±»å‹ï¼š

**integers, float-point numbers, Booleans, characters**

##### æ•´å‹ç±»å‹ï¼š

| ä½æ•°                    | æœ‰ç¬¦å·  | æ— ç¬¦å·  |
| ----------------------- | ------- | ------- |
| 8-bit                   | `i8`    | `u8`    |
| 16-bit                  | `i16`   | `u16`   |
| 32-bit                  | `i32`   | `u32`   |
| 64-bit                  | `i64`   | `u64`   |
| 128-bit                 | `i128`  | `u128`  |
| arch[æœºå™¨çš„CPUæ¶æ„å†³å®š] | `isize` | `usize` |

###### æ•´å‹å­—é¢é‡ï¼š

| è‡ªé¢é‡                 | å®ä¾‹          |
| ---------------------- | ------------- |
| Decimal(åè¿›åˆ¶)        | `98_222`      |
| Hex(åå…­è¿›åˆ¶)          | `0xff`        |
| Octal(å…«è¿›åˆ¶)          | `0o77`        |
| Binary(äºŒè¿›åˆ¶)         | `0b1111_0000` |
| Byte (`u8` only)(å­—èŠ‚) | `b'A'`        |

###### æ•´å‹æº¢å‡º

åœ¨debugæ¨¡å¼ä¸‹ç¼–è¯‘ï¼Œç›´æ¥panicç»ˆæ­¢ç¨‹åºï¼›

åœ¨releaseæ¨¡å¼ä¸‹ç¼–è¯‘ï¼Œnum - 2^n

##### æµ®ç‚¹æ•°

f32å’Œf64ï¼Œé»˜è®¤f64

æ•°å­—æ“ä½œï¼š+ - * / % [æ›´å¤šç»†èŠ‚](https://doc.rust-lang.org/book/appendix-02-operators.html)

##### å¸ƒå°”å‹

```rust
let t = true;
let f: bool = false;
```

*å¸ƒå°”å‹åªå ä¸€ä¸ªå­—èŠ‚çš„å¤§å°*

##### å­—ç¬¦ç±»å‹

```rust
let c = 'z';
let z = 'â„¤';
let heart_eyed_cat = 'ğŸ˜»';
```

rustçš„charæ˜¯unicodeçº¯é‡å€¼



#### å¤åˆç±»å‹

##### å…ƒç»„

```rust
let tup: (i32, f64, u8) = (500, 6.4, 1);
let (x, y, z) = tup;
let a = tup.0
let b = tup.1
let c = tup.2
```

##### æ•°ç»„ç±»å‹

ä¸tupleä¸åŒçš„æ˜¯æ•°ç»„æ‰€æœ‰å…ƒç´ çš„ç±»å‹å¿…é¡»ä¸€æ ·ï¼Œä½†æ˜¯ä¸tupleä¸€æ ·éƒ½æœ‰å›ºå®šé•¿åº¦

```rust
let a = [1, 2, 3, 4, 5];
// å®šä¹‰æ•°ç»„é•¿åº¦ä¸º5ä¸”å…ƒç´ ç±»å‹ä¸º32ä½æœ‰ç¬¦å·æ•´å‹ï¼Œ
let b: [i32; 5] = [1, 2, 3, 4, 5];
```

æ•°ç»„æ˜¯ä¸èƒ½è¿›è¡Œç¼©å®¹æˆ–æ‰©å®¹ï¼Œå¦‚æœä¸äº†è§£å…·ä½“å…ƒç´ æ•°é‡ï¼Œè¯·ä½¿ç”¨vector

### å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰

**rustä¸­æ‰€æœ‰çš„æ–¹æ³•åæˆ–å˜é‡åéƒ½ä»¥ä¸‹åˆ’çº¿çš„æ–¹å¼å‘½åï¼Œæ‰€æœ‰å­—æ¯éƒ½å°å†™ï¼Œå¹¶ä¸”ä»¥ä¸‹åˆ’çº¿åˆ†å‰²**

```rust
fn function_name() {
    // TODO
}
```

#### å‚æ•°

```rust
fn test_param(x: i32, y: u64) {
    
}
```

æ–¹æ³•ä½“åŒ…å«äº†å£°æ˜åŠè¡¨è¾¾å¼

#### è¿”å›å€¼

```rust
fn plus_one(x: i32) -> i32 {
    x + 1
}
```



### æ§åˆ¶æµç¨‹

#### if è¡¨è¾¾å¼

```rust
if bool {
   
} else if bool {
    
} else {
    
}
```

letå£°æ˜ä¸­ä½¿ç”¨if

```rust
let number = if condition {
    5
} else {
    6
};
// ifå’Œelseè¿”å›çš„ç±»å‹å¿…é¡»ä¸€è‡´
```

#### å¾ªç¯

##### loop

```rust
loop {
    println!("again!");
}
let result = loop {
	counter += 1;

    if counter == 10 {
        break counter * 2;
    }
};
```

##### while

```rust
while number != 0 {
	println!("{}!", number);
	number = number - 1;
}
```

##### for

```rust
for element in array.iter() {
    println!("the value is: {}", element);
}
for number in (1..4).rev() {
    println!("{}!", number);
}
```

